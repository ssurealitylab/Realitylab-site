<!-- Robot Easter Egg -->
<div id="robot-easter-egg" style="display: none;">
  <div id="robot-container">
    <!-- Your actual robot image -->
    <img src="{{ '/assets/images/robot_hello_world.png' | relative_url }}" alt="Hello World Robot" width="250" height="auto" />
  </div>
</div>

<style>
#robot-easter-egg {
  position: fixed;
  top: 50%;
  left: -250px; /* Start off-screen */
  transform: translateY(-50%);
  z-index: 9999;
  pointer-events: none;
}

#robot-container {
  animation-fill-mode: forwards;
}

/* Slide-in animation */
@keyframes slideInRobot {
  0% {
    left: -250px;
  }
  20% {
    left: 20px; /* Stop so left edge is visible */
  }
  80% {
    left: 20px; /* Stay visible longer */
  }
  100% {
    left: -250px; /* Slide back out */
  }
}

/* Bounce animation for the robot image */
@keyframes bounceRobot {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-10px); }
  60% { transform: translateY(-5px); }
}

.robot-animate {
  animation: slideInRobot 5s ease-in-out;
}

.robot-animate #robot-container img {
  animation: bounceRobot 1s ease-in-out infinite;
}
</style>

<script>
// Wait for everything to load, then try multiple times
setTimeout(function() {
    let clickCount = 0;
    let clickTimer = null;
    let isAnimating = false;
    
    console.log('Robot Easter Egg script starting...');
    
    function findLogo() {
        // Try multiple selectors for the logo
        return document.getElementById('reality-lab-logo') || 
               document.querySelector('.navbar-brand') || 
               document.querySelector('a.navbar-brand') ||
               document.querySelector('nav .container a:first-child') ||
               document.querySelector('#mainNav .navbar-brand');
    }
    
    function initEasterEgg() {
        const logo = findLogo();
        const robotEgg = document.getElementById('robot-easter-egg');
        
        console.log('Trying to find logo...');
        console.log('Logo element:', logo);
        console.log('Logo text content:', logo ? logo.textContent : 'N/A');
        console.log('Robot egg element:', robotEgg);
        
        if (!logo || !robotEgg) {
            console.log('Elements not found, will keep trying...');
            return false;
        }
        
        console.log('‚úÖ Logo found! Setting up easter egg...');
        
        logo.addEventListener('click', function(e) {
            e.preventDefault();
            
            console.log('Logo clicked! Count:', clickCount + 1);
            
            // Reset timer if more than 3 seconds passed
            if (clickTimer) {
                clearTimeout(clickTimer);
            }
            
            clickCount++;
            
            // Reset click count after 3 seconds
            clickTimer = setTimeout(function() {
                console.log('Click count reset');
                clickCount = 0;
            }, 3000);
            
            // Trigger easter egg if 5 clicks within 3 seconds
            if (clickCount >= 5 && !isAnimating) {
                console.log('ü§ñ Easter egg triggered!');
                triggerRobotEasterEgg();
                clickCount = 0;
            }
        });
        
        function triggerRobotEasterEgg() {
            if (isAnimating) return;
            
            console.log('üé¨ Showing robot animation');
            isAnimating = true;
            robotEgg.style.display = 'block';
            robotEgg.classList.add('robot-animate');
            
            // Hide after animation completes (5 seconds total)
            setTimeout(function() {
                robotEgg.style.display = 'none';
                robotEgg.classList.remove('robot-animate');
                isAnimating = false;
                console.log('üé¨ Robot animation completed');
            }, 5000);
        }
        
        return true;
    }
    
    // Try multiple times with increasing delays
    let attempts = 0;
    function tryInit() {
        attempts++;
        console.log(`üîç Easter egg init attempt ${attempts}`);
        
        if (initEasterEgg()) {
            console.log('üéâ Easter egg successfully initialized!');
            return;
        }
        
        if (attempts < 10) {
            setTimeout(tryInit, attempts * 1000); // 1s, 2s, 3s, etc.
        } else {
            console.log('‚ùå Failed to initialize easter egg after 10 attempts');
        }
    }
    
    tryInit();
}, 2000); // Start after 2 seconds
</script>